<div class="color-selector-container">
  <div class="header">
    <h1>Selecciona tu color</h1>
    <div class="room-info">
      <p>ID: {{ roomCode }}</p>
      <button class="share-btn" (click)="copyRoomCode()" [class.copied]="copied">
        @if (!copied) {
          <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
          </svg>
        } @else {
          <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
          </svg>
        }
        {{ copied ? '¡Copiado!' : 'Copiar' }}
      </button>
    </div>
  </div>

  <div class="color-options">
    @for (color of colors; track color.id) {
      <div
        class="color-option"
        [class.selected]="selectedColor === color.id"
        [class.disabled]="!isColorAvailable(color.id)"
        (click)="selectColor(color.id)"
      >
        <div class="pawn-icon" [style.background-color]="color.hex">
          @if (!isColorAvailable(color.id)) {
            <div class="unavailable-overlay">✕</div>
          }
        </div>
        <span class="color-name">{{ color.name }}</span>
        @if (!isColorAvailable(color.id)) {
          <span class="unavailable-text">Ocupado</span>
        }
      </div>
    }
  </div>

  @if (selectedColor) {
    <div class="nickname-section">
    <h3>Tu nombre de jugador</h3>
    <input
      type="text"
      placeholder="Ingresa tu nick"
      [(ngModel)]="playerName"
      class="nickname-input"
      maxlength="15"
      [disabled]="isLoading"
    >
    <button
      class="join-game-btn"
      (click)="joinGame()"
      [disabled]="!playerName || playerName.trim().length < 2 || isLoading"
    >
      {{ isLoading ? 'Uniéndose...' : '¡Jugar!' }}
    </button>
    </div>
  }

  @if (errorMessage) {
    <div class="error-message">
      {{ errorMessage }}
    </div>
  }
</div>
